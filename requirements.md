# 大学生AI助学Web App（小猪厨师版）开发需求文档

## 一、核心定位与开发目标（必优先明确）

### 1. 产品定位
面向大学生的私人助学Web App，以“小猪厨师烹饪”为核心场景，通过思维适配型AI知识图谱+智能当日任务生成，解决学习碎片化、时间管理混乱问题，实现“知识梳理→任务执行→激励反馈”闭环；UI为日系动画扁平风，贯穿“思维=锅底、课程=菜品、知识点=馅料”隐喻，增强趣味性与粘性，**全APP UI必须为英文**。

### 2. 开发核心目标
- **功能完整**：覆盖登录注册、课程上传、任务生成、图谱展示等全流程，支持离线演示、课程增改等核心操作；
- **稳定可靠**：依托固定JSON Schema约束LLM输出，结合离线缓存/样例规避网络与限流风险；
- **参赛适配**：契合竞赛评分标准（创新、技术、实用、完整），界面整洁、演示流畅，支撑答辩讲解；
- **单人开发友好**：代码模块化可复用、文档规范，适配双设备同步开发，优先保障快速落地与可演示性。

### 3. 核心隐喻规则（全程严格遵循）
- **思维类型**：发散性=清汤锅底（graph图谱），收敛性（逻辑性）=红油锅底（tree图谱）；
- **课程**：单门课=一道菜品（饺子、拉面等，配专属icon）；
- **知识点**：课程知识点=菜品馅料/蔬菜（完成任务后灰变彩色点亮）；
- **任务**：当日学习任务=小猪“烹饪任务”，动词开头、操作性强，适配思维类型；
- **激励**：完成任务获胡萝卜，投喂小猪，次数计入成长成就。

## 二、技术栈规范（固定不可修改，精准适配）

### 1. 前端技术栈
- **核心基础**：HTML/CSS/JS原生开发，无额外框架依赖；
- **UI框架**：轻量引入Bootstrap，实现响应式与界面统一；
- **图谱可视化**：优先vis-network（低学习成本、优演示效果），原生JS调用，支持拖拽、高亮、缩放等交互；
- **离线缓存**：基于HTML5 Service Workers+localStorage，缓存核心资源及2-3套离线样例；
- **交互要求**：操作有反馈（按钮变色、加载动画等），微交互动效贴合日系动画风。

### 2. 后端技术栈（方案：Django+MongoDB）
- **核心框架**：Python+Django，复用内置认证、admin后台与路由配置；
- **数据库对接**：MongoEngine（MongoDB专属ORM，替代djongo避坑），支持JSON原生存储；
- **AI接口调用**：集成requests库同步调用，实现参数拼接、数据接收与格式化；
- **离线支撑**：AI接口调用成功后，同步存储数据至MongoDB与本地JSON，无网时读取离线样例。

### 3. 数据库规范
- **数据库**：MongoDB（非关系型，原生存储JSON图谱数据，无需复杂转换）；
- **核心集合**：user、course、graph、task、study_stats，字段设计贴合场景隐喻；
- **双设备同步**：数据库文件随项目存入云盘，实现Windows/Mac实时同步无差异。

### 4. AI接口调用规范（核心约束）
- **调用方式**：后端统一调用，前端不直接调用，保障数据格式统一；
- **输出约束**：采用“固定JSON Schema+模型函数调用”，Prompt注入Schema强制规范输出；
- **Schema要求**：为图谱、任务定义标准JSON格式，明确字段、类型、必传项等；
- **异常处理**：接口调用失败时自动切换离线样例，前端给出场景化提示。

## 三、界面与跳转逻辑（全程严格遵循，共10个界面）

### 核心设计原则
1. **风格统一**：日系动画扁平风，主色调暖黄+浅粉，辅助色木色、红、浅蓝，色彩≤4种；
2. **元素统一**：右上角固定小猪头像（跳转个人中心），核心按钮圆角，加载动画贴合烹饪场景；
3. **交互统一**：页面淡入淡出跳转，按钮点击有反馈，错误提示场景化。

### 10个界面详细规范（含跳转/功能/UI/开发要求）

#### 界面0：欢迎页（启动页）
- **UI设计**：全屏厨房背景，中间眨眼睛小猪，下方App名称，底部浅粉色“Tap to Start”圆角按钮（点击缩放）；
- **核心功能**：首次启动加载离线样例、初始化缓存，隐藏加载逻辑防卡顿；
- **跳转逻辑**：点击按钮→界面1（登录页）；
- **开发要求**：Trae生成完整代码（含背景、动画、加载逻辑）。

#### 界面1：登录页
- **UI设计**：左侧小猪挥手动画，右侧Bootstrap登录/注册表单，底部浅粉“注册”、暖黄“登录”按钮；
- **核心功能**：支持极简注册（用户名/密码/专业）与登录，注册时小猪给出专业相关可爱吐槽；
- **跳转逻辑**：首次登录成功→界面2（上传页）；非首次→跳过2/3→界面4（开始页）；
- **开发要求**：Trae生成表单代码，实现基础校验、登录注册逻辑，对接后端接口。

#### 界面2：上传页
- **UI设计**：厨房操作台背景，中间小猪举空锅（锅中间木色“上传食材”按钮），下方提示上传课程大纲；
- **核心功能**：支持上传PDF/Word格式大纲，后端解析存储课程信息至MongoDB；
- **交互细节**：点击上传后锅冒热气，解析完成弹出成功提示（小猪蹦跳动画）；
- **跳转逻辑**：上传完成→界面3（选择页）；
- **开发要求**：Trae生成上传、动画、提示代码，对接后端解析接口。

#### 界面3：选择页（思维类型）
- **UI设计**：厨房灶台背景，左右分置清汤（浅蓝）、红油（红）锅底，中间小猪，下方提示选择学习方式；
- **核心功能**：选择思维类型并存储，后续可在个人中心修改；
- **交互细节**：点击锅底触发沸腾动画，小猪喊对应口号；
- **跳转逻辑**：选择完成→界面4（开始页）；非首次登录自动跳过；
- **开发要求**：Trae生成动画、交互代码，对接后端存储接口。

#### 界面4：开始页
- **UI设计**：厨房餐桌背景，上方小猪举空盘，中间卡通标题，下方芝士滑动条（1-5个盘子），底部暖黄“开始烹饪”按钮；
- **核心功能**：滑动选择当日任务数量（1-5），后端结合课程表时间匹配；
- **交互细节**：滑动时小猪点头，点击按钮有食材下锅动画；
- **跳转逻辑**：选择后点击按钮→界面5（关键信息页）；未完成任务可直接进入；
- **开发要求**：Trae生成滑动条、动画代码，对接后端匹配接口。

#### 界面5：关键信息页（核心功能页）
- **UI设计**：木色案板背景，上60%为图谱展示区（vis-network渲染），下40%为当日任务列表（圆角卡片）；
- **核心功能**：展示任务与课程图谱，支持任务点击、图谱交互、知识点点亮；
- **交互细节**：点击课程高亮对应知识点，点击任务跳转界面7，完成任务后知识点点亮（小猪拍手动画）；
- **跳转逻辑**：点击任务→界面7；全任务完成→自动跳转界面6；点击“暂停”→返回界面4；
- **开发要求**：Trae生成图谱渲染、任务展示代码，集成vis-network并对接后端接口。

#### 界面6：结果页（激励页）
- **UI设计**：温馨厨房背景，中间小猪站食盆前，上方掉落胡萝卜，底部“今日复盘”“明日继续”按钮；
- **核心功能**：奖励胡萝卜，投喂次数计入成就，支持复盘与返回开始页；
- **交互细节**：点击胡萝卜触发投喂动画（小猪蹦跳+爱心）；
- **跳转逻辑**：点击“复盘”→界面5；点击“明日继续”→界面4；
- **开发要求**：Trae生成投喂动画代码，对接后端成就统计接口。

#### 界面7：任务详情页
- **UI设计**：木色案板背景，上方课程icon，中间任务步骤说明，下方“开始任务”“暂时跳过”按钮；
- **核心功能**：拆解任务步骤，支持开始任务（跳转图谱勾选）、暂时跳过（标记未完成）；
- **交互细节**：点击“开始”有切菜动画，点击“跳过”小猪歪头提示；
- **跳转逻辑**：开始任务→图谱勾选界面（完成后标记并返回）；跳过→界面5；
- **开发要求**：Trae生成步骤展示、动画代码，对接后端任务状态接口。

#### 界面8：个人中心页（数据管理+设置）
- **UI设计**：厨房角落背景，上方小猪抱胡萝卜，中间4个圆角卡片模块，底部“退出登录”按钮；
- **核心功能**：①我的课程（展示/增删）；②我的设置（改思维类型等）；③我的成就（数据统计）；④退出登录；
- **交互细节**：点击模块轻微缩放，修改思维类型后弹出提示（小猪挥手动画）；
- **跳转逻辑**：点击右上角小猪头像→界面8；操作完成返回原界面；退出→界面1；
- **开发要求**：Trae生成模块展示、数据统计代码，对接后端各功能接口。

#### 界面9：离线演示备用页
- **UI设计**：厨房储物柜背景，中间戴口罩小猪+离线icon，下方提示无网，底部木色“开始离线演示”按钮；
- **核心功能**：无网时自动跳转，加载离线样例保障演示；
- **交互细节**：点击按钮有食材取出动画，弹出提示；
- **跳转逻辑**：无网自动跳转；点击按钮→加载样例→界面3（可选）→4→5（离线数据）；
- **开发要求**：Trae生成网络检测、离线加载代码，对接本地缓存样例。

### 完整跳转流程图（3类核心场景）
- **首次登录**：界面0→1→2→3→4→5→7→5（点亮馅料）→6→4/8；
- **非首次登录**：界面0→1→4→5→7→5→6→4/8；
- **离线演示**：界面0→9→3（可选）→4→5（离线数据）→7→5→6。

## 四、核心技术细节规范（必严格执行）

### 1. JSON Schema定义（固定，用于LLM输出约束）
- **知识图谱JSON Schema**
- **智能任务JSON Schema**

### 2. 离线缓存实现规范
- **缓存内容**：核心静态资源、2-3套覆盖不同思维类型的离线样例；
- **实现方式**：前端Service Workers+localStorage，后端本地JSON（与MongoDB同步）；
- **切换逻辑**：启动检测网络，有网调用接口，无网加载缓存与样例；
- **开发要求**：Trae生成缓存注册、网络检测、离线加载代码。

### 3. 知识图谱可视化规范
- **渲染工具**：优先vis-network（CDN引入）；
- **样式要求**：节点（课程=菜品、知识点=馅料icon），边为关系线条，木色背景，支持缩放/拖拽；
- **交互要求**：点击节点高亮关联元素，勾选知识点标记待完成，完成后变色点亮；
- **开发要求**：Trae生成图谱初始化、数据适配、交互代码，对接后端接口。

## 五、交付物要求（AI/Trae需按此输出）

### 1. 代码交付物（模块化、可复用、注释完整）
- **前端**：10个界面完整代码、通用工具类、动画、离线缓存代码；
- **后端**：Django架构、数据库连接、全量接口、AI调用等代码；
- **数据库**：集合创建、样例数据插入脚本；
- **配置文件**：双设备同步说明、环境安装脚本、启动命令。

### 2. 文档交付物（适配参赛答辩）
- **开发文档**：技术栈、界面逻辑、实现流程、难点解决方案、离线配置；
- **接口文档**：全量接口清单、调用示例；
- **参赛素材**：项目亮点、演示脚本、评委提问预测、开发进度表；
- **运行手册**：安装、启动、同步、离线切换、功能演示步骤。

### 3. 输出规范
- **代码**：注释完整、格式规范，可直接复制运行；
- **文档**：Markdown格式，结构清晰、重点突出，适配答辩；
- **优先级**：优先输出核心界面（0-6）及接口代码，再输出辅助内容。

## 六、关键约束与注意事项（必遵守）
- **风格约束**：贴合小猪厨师主题，遵循日系动画风与核心隐喻；
- **技术约束**：严格按指定技术栈开发，禁止额外框架/工具，规避djongo；
- **演示约束**：页面加载≤2秒，无网环境下演示完整、无卡顿报错；
- **单人开发适配**：代码模块化、文档规范，双设备同步无差异；
- **输出约束**：严格遵循JSON Schema定义输出数据，保障数据格式统一可复用。


##七 未来工作：
1. 从syllabus中提取课程知识的时候需要使用更加完善的算法，智能提取出课程重点 而不是只选取前5000个字符